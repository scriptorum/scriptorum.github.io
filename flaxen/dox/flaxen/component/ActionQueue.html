<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../bootstrap-combined.min.css" rel="stylesheet" /><script type="text/javascript" src="../../jquery-1.9.1.min.js"></script><script type="text/javascript" src="../../bootstrap.min.js"></script><link href="../../styles.css" rel="stylesheet" /><link rel="icon" href="../../favicon.ico" type="image/x-icon"></link><script type="text/javascript" src="../../nav.js"></script><script type="text/javascript" src="../../index.js"></script><script type="text/javascript">var dox = {rootPath: "../../",platforms: ["dox"]};</script><title>ActionQueue - Flaxen API 28-Apr-15</title></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><form class="navbar-search pull-left" id="searchForm"><input id="search" type="text" class="search-query" placeholder="Filter" autocomplete="off"/></form><ul class="nav"><li id="select-platform" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform<b class="caret"></b></a><ul class="dropdown-menu"><li data="all"><a href="#">All Platforms</a></li><li data="dox"><a href="#">dox</a></li></ul></li></ul></div></div><div id="container"><div id="nav"></div><div id="content"><div class="header"><span class="viewsource"><a href="https://github.com/scriptorum/flaxen/blob/master/source/flaxen/component/ActionQueue.hx">View source</a></span><h1><code><span class="directive">class </span><span class="type">flaxen.component.ActionQueue</span><span class="keyword"> implements</span> <a class="type" href="../../flaxen/common/Completable.html">Completable</a></code></h1></div><div class="body"><p class="availability">Available on all platforms</p><div class="doc"><p>An action queue is a chain of steps that modify Ash in sequence. For 
example, you can tween an entity to some point, wait for it to complete 
tweening, add a component to that entity and then kick off a callback:</p>
<pre><code>f.newActionQueue()
 	.waitForWrap(new Tween(myEntity.get(Position), { x:50, y:100 }, 3.0, null, null, DestroyEntity))
 	.addComponent(myEntity, new ReadyToFire())
 	.call(function() { levelMgr.load(nextLevel); });</code></pre><ul><li>NOTE: ActionQueues cannot be shared between entities.</li><li>TODO: Add description and give usage examples, add examples</li><li>TODO: Move actions to action folder? Right now it clutters up the Component API section.</li><li>
<p>CONSIDER: Could the AQ retain a copy of the last entity/component/object it worked on,
  and then recall that entity with a special construct?</p></li></ul></div><h2>Class Fields</h2><div class="platform platform-dox"><a name="created"></a><h3><p><code><span class="keyword">static </span><span class="keyword">var</span> <a href="#created"><span class="identifier">created</span></a>:<span class="type">Int</span></code></p></h3><div class="doc"><p>The total number of action queues created</p></div></div><h2>Instance Fields</h2><div class="platform platform-dox"><a name="complete"></a><h3><p><code><span class="keyword">var</span> <a href="#complete"><span class="identifier">complete</span></a>:<span class="type">Bool</span></code></p></h3><div class="doc"><p>This is set to true when the queue becomes empty</p></div></div><div class="platform platform-dox"><a name="name"></a><h3><p><code><span class="keyword">var</span> <a href="#name"><span class="identifier">name</span></a>:<span class="type">String</span></code></p></h3><div class="doc"><p>The name is primarily intended for logging, but you can also set it to the 
holding entity's name; in fact, that's what <code><a href="../../flaxen/Flaxen.html#newActionQueue">Flaxen.newActionQueue</a></code> does</p></div></div><div class="platform platform-dox"><a name="onComplete"></a><h3><p><code><span class="keyword">var</span> <a href="#onComplete"><span class="identifier">onComplete</span></a>:<a class="type" href="../../flaxen/common/OnComplete.html">OnComplete</a></code></p></h3><div class="doc"><p>What to do after the action queue completes</p></div></div><div class="platform platform-dox"><a name="running"></a><h3><p><code><span class="keyword">var</span> <a href="#running"><span class="identifier">running</span></a>:<span class="type">Bool</span></code></p></h3><div class="doc"><p>The action queue is only processed when running is true; you can set this false 
to pause the queue; you can pass false for autoStart to delay executation.</p></div></div><div class="platform platform-dox"><a name="new"></a><h3><p><code><span class="keyword">function</span> <a href="#new"><span class="identifier">new</span></a>(?f:<a class="type" href="../../flaxen/Flaxen.html">Flaxen</a> = null, ?onComplete:<a class="type" href="../../flaxen/common/OnComplete.html">OnComplete</a> = null, ?autoStart:<span class="type">Bool</span> = true, ?name:<span class="type">String</span> = null):<span class="type">Void</span></code></p></h3><div class="doc"><p>Creates a new ActionQueue.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>The</td><td><p>Flaxen object</p></td></tr><tr><td>onComplete</td><td><p>What to do after the queue completes</p></td></tr><tr><td>autoStart</td><td><p>If true (default) runs the queue immediately; if false, you may run the queue manually by setting <code>running</code></p></td></tr><tr><td>The</td><td><p>name of the ActionQueue; see <code>name</code></p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="add"></a><h3><p><code><span class="keyword">function</span> <a href="#add"><span class="identifier">add</span></a>(action:<a class="type" href="../../flaxen/component/Action.html">Action</a>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Adds an action to the queue.</p>
<p>The priority flag is intended to allow a callback action to modify the 
queue while its still being processed. To do this, pass true for 
priority as the last parameter. Priority actions are kept in a 
secondary queue, and will be added to front of the main queue when 
the callback completes.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>action</td><td><p>An action (command) object to add to the queue</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="addActions"></a><h3><p><code><span class="keyword">function</span> <a href="#addActions"><span class="identifier">addActions</span></a>(actions:<span class="type">Array</span>&lt;<a class="type" href="../../flaxen/component/Action.html">Action</a>&gt;):<span class="type">Void</span></code></p></h3><div class="doc"><p>Adds an array of actions at once.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>actions</td><td><p>The array</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="addComponent"></a><h3><p><code><span class="keyword">function</span> <a href="#addComponent"><span class="identifier">addComponent</span></a>(entityRef:<a class="type" href="../../flaxen/EntityRef.html">EntityRef</a>, component:<span class="type">Dynamic</span>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Adds a component to an existing entity</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>entity</td><td><p>The existing entity to receive the component</p></td></tr><tr><td>component</td><td><p>The component to be added</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="addEntity"></a><h3><p><code><span class="keyword">function</span> <a href="#addEntity"><span class="identifier">addEntity</span></a>(entityRef:<a class="type" href="../../flaxen/EntityRef.html">EntityRef</a>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Adds an entity to Ash that hasn't been added yet. 
See <code>newEntity(..., false)</code> in Flaxen or <code>new Entity()</code> in Ash.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>entity</td><td><p>An entity to be added</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="call"></a><h3><p><code><span class="keyword">function</span> <a href="#call"><span class="identifier">call</span></a>(func:<span class="type">Void</span> -&gt;<span class="type">Void</span>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Calls a function that accepts no parameters and returns nothing.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>func</td><td><p>An anonymous function in the form of Void->Void</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="execute"></a><h3><p><code><span class="keyword">function</span> <a href="#execute"><span class="identifier">execute</span></a>():<span class="type">Bool</span></code></p></h3><div class="doc"><p>Executes the next action(s) and returns true if the action queue is empty
When actions are completed, they are removed from the queue and the next
action is executed. An action can hold up the queue by returning false
for its execute method, in which case it will be called again later.
See ActionSystem.</p></div></div><div class="platform platform-dox"><a name="log"></a><h3><p><code><span class="keyword">function</span> <a href="#log"><span class="identifier">log</span></a>(message:<span class="type">String</span>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Logs a message to the console.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>message</td><td><p>The string to log</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="pause"></a><h3><p><code><span class="keyword">function</span> <a href="#pause"><span class="identifier">pause</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-dox"><a name="removeComponent"></a><h3><p><code><span class="keyword">function</span> <a href="#removeComponent"><span class="identifier">removeComponent</span></a>(entityRef:<a class="type" href="../../flaxen/EntityRef.html">EntityRef</a>, component:<span class="type">Class</span>&lt;<span class="type">Dynamic</span>&gt;, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Removes a component from an entity.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>entity</td><td><p>The entity with the component</p></td></tr><tr><td>component</td><td><p>The component to be removed</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action; see <code>add()</code></p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="removeEntity"></a><h3><p><code><span class="keyword">function</span> <a href="#removeEntity"><span class="identifier">removeEntity</span></a>(entityRef:<a class="type" href="../../flaxen/EntityRef.html">EntityRef</a>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Removes an entity from Ash.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>entity</td><td><p>An entity object to be removed, or the string name of such an entity</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="resume"></a><h3><p><code><span class="keyword">function</span> <a href="#resume"><span class="identifier">resume</span></a>():<span class="type">Void</span></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-dox"><a name="setProperty"></a><h3><p><code><span class="keyword">function</span> <a href="#setProperty"><span class="identifier">setProperty</span></a>(object:<span class="type">Dynamic</span>, property:<span class="type">String</span>, value:<span class="type">Dynamic</span>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Sets the property of an object to a value. As in, <code>object.property = value;</code>.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>object</td><td><p>An object with a matching property</p></td></tr><tr><td>property</td><td><p>A string representing the name of the property</p></td></tr><tr><td>value</td><td><p>The value to set the property to</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="wait"></a><h3><p><code><span class="keyword">function</span> <a href="#wait"><span class="identifier">wait</span></a>(seconds:<span class="type">Float</span>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Delays an amount of time before continuing the action queue.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>seconds</td><td><p>The number seconds to wait</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="waitForCall"></a><h3><p><code><span class="keyword">function</span> <a href="#waitForCall"><span class="identifier">waitForCall</span></a>(func:<span class="type">Void</span> -&gt;<span class="type">Bool</span>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Calls a function repeatedly, that accepts no parameters and returns a boolean value,
until that function returns true. This works sort of like a thread.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>func</td><td><p>An anonymous function in the form of Void->Bool</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="waitForComplete"></a><h3><p><code><span class="keyword">function</span> <a href="#waitForComplete"><span class="identifier">waitForComplete</span></a>(completable:<a class="type" href="../../flaxen/common/Completable.html">Completable</a>, priority:<span class="type">Bool</span>):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p></p></div></div><div class="platform platform-dox"><a name="waitForProperty"></a><h3><p><code><span class="keyword">function</span> <a href="#waitForProperty"><span class="identifier">waitForProperty</span></a>(object:<span class="type">Dynamic</span>, property:<span class="type">String</span>, value:<span class="type">Dynamic</span>, ?priority:<span class="type">Bool</span> = false):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Waits for the value of an object's property to reach a certain value.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>object</td><td><p>An object with a matching property</p></td></tr><tr><td>property</td><td><p>A string representing the name of the property</p></td></tr><tr><td>value</td><td><p>The value to wait for</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="waitForWrap"></a><h3><p><code><span class="keyword">function</span> <a href="#waitForWrap"><span class="identifier">waitForWrap</span></a>(completable:<a class="type" href="../../flaxen/common/Completable.html">Completable</a>, priority:<span class="type">Bool</span>):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Wraps a <code><a href="../../flaxen/common/Completable.html">Completable</a></code> component into a new entity.
Creates a new entity with an unique name, adds it to ash, and adds the component to the entity.
Waits until the component's complete property is true.
This is useful for adding new Tweens and Sounds, for example, other perhaps another ActionQueue.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>component</td><td><p>A Completable component to wrap into a new entity and wait for</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div><div class="platform platform-dox"><a name="wrap"></a><h3><p><code><span class="keyword">function</span> <a href="#wrap"><span class="identifier">wrap</span></a>(component:<span class="type">Dynamic</span>, priority:<span class="type">Bool</span>):<a class="type" href="../../flaxen/component/ActionQueue.html">ActionQueue</a></code></p></h3><div class="doc"><p>Wraps a component into a new entity.
Creates a new entity with an unique name, adds it to ash, and adds the component to the entity.</p><table class="table table-condensed"><tbody><col width="10%"/>  <col width="100%"/><tr><td>component</td><td><p>The component to "wrap" into a new entity</p></td></tr><tr><td>priority</td><td><p>Set true if this is a priority action (see <code>add()</code>)</p></td></tr><tr><td>returns</td><td><p>This ActionQueue object</p></td></tr></tbody></table></div></div></div></div></div></body></html>